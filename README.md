
# ðŸ“ å¾®ä¿¡å…¬ä¼—å·æŽ’ç‰ˆè½¬æ¢å™¨ (WeChat Converter)

**è®©æŠ€æœ¯å†™ä½œå›žå½’ä¼˜é›…ä¸Žçº¯ç²¹ã€‚**

ä¸€æ¬¾ä¸“ä¸º Obsidian æ‰“é€ çš„å¾®ä¿¡å…¬ä¼—å·æŽ’ç‰ˆå¢žå¼ºæ’ä»¶ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªè½¬æ¢å·¥å…·ï¼Œæ›´æ˜¯æ‚¨å†…å®¹åˆ›ä½œæµä¸­çš„"æ•°å­—åŒ–å¦†å¸ˆ"ã€‚æˆ‘ä»¬è§£å†³äº† Obsidian åˆ°å¾®ä¿¡å…¬ä¼—å·æŽ’ç‰ˆçš„"æœ€åŽä¸€å…¬é‡Œ"é—®é¢˜ï¼Œè®©æ‚¨ä¸“æ³¨äºŽå†…å®¹åˆ›ä½œï¼Œæ— éœ€ä¸ºç¹ççš„æ ¼å¼è°ƒæ•´è€Œåˆ†å¿ƒã€‚

åªéœ€ä¸€é”®ï¼Œå³å¯å°†æ‚¨çš„ Markdown ç¬”è®°è½¬æ¢ä¸ºç¬¦åˆå¾®ä¿¡ç”Ÿæ€ç¾Žå­¦ã€é˜…è¯»ä½“éªŒæžä½³çš„ HTMLï¼Œæ— è®ºæ˜¯ä»£ç å—ã€å¼•ç”¨ã€åˆ—è¡¨è¿˜æ˜¯æœ¬åœ°å›¾ç‰‡ï¼Œéƒ½èƒ½å®Œç¾Žå‘ˆçŽ°ã€‚

![Version](https://img.shields.io/badge/version-2.0.0-blue)
![Obsidian](https://img.shields.io/badge/Obsidian-1.0.0+-purple)
![License](https://img.shields.io/badge/license-MIT-green)


> æœ¬é¡¹ç›®åŸºäºŽå¼€æºé¡¹ç›® [ai-writing-plugins](https://github.com/Ceeon/ai-writing-plugins) è¿›è¡Œæ·±åº¦é‡æž„ä¸Žè¿­ä»£å¼€å‘ã€‚æˆ‘ä»¬è‡´åŠ›äºŽæ‰“é€  Obsidian ç”Ÿæ€ä¸­ä½“éªŒæœ€å¥½çš„å…¬ä¼—å·æŽ’ç‰ˆå·¥å…·ã€‚

## ðŸ’¡ æ ¸å¿ƒå‡çº§ç‚¹ (Key Highlights)

ç›¸è¾ƒäºŽåŽŸç‰ˆï¼Œæˆ‘ä»¬**é‡å†™äº†æ ¸å¿ƒæ¸²æŸ“é€»è¾‘**å¹¶æ–°å¢žäº†å¤§é‡å®žç”¨åŠŸèƒ½ï¼Œæ—¨åœ¨å®žçŽ°çœŸæ­£çš„**"æ‰€è§å³æ‰€å¾—"**ï¼š

1.  **ðŸš€ ä¸€é”®åŒæ­¥åˆ°å¾®ä¿¡è‰ç¨¿ç®± (v2.0 æ–°å¢ž)**
    - **å‘Šåˆ«å¤åˆ¶ç²˜è´´**ï¼šç›´æŽ¥å°†æ–‡ç« åŒæ­¥åˆ°å¾®ä¿¡å…¬ä¼—å·åŽå°è‰ç¨¿ç®±ï¼Œå›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ ã€‚
    - **æ™ºèƒ½å°é¢å¤„ç†**ï¼šè‡ªåŠ¨æå–æ–‡ç« é¦–å›¾ä½œä¸ºå°é¢ï¼ˆæ™ºèƒ½æŽ’é™¤å¤´åƒï¼‰ï¼Œæ”¯æŒæ‰‹åŠ¨ä¸Šä¼ /æ›¿æ¢ã€‚
    - **æ™ºèƒ½æ‘˜è¦è¾…åŠ©**ï¼šè‡ªåŠ¨æå–æ–‡ç« å‰ 45 å­—æ‘˜è¦ï¼Œæä¾›å®žæ—¶å­—æ•°ç»Ÿè®¡ (45/120)ï¼Œè®©åˆ†äº«æ›´ç²¾å‡†ã€‚
    - **å¤šè´¦å·ç®¡ç†**ï¼šæ”¯æŒæœ€å¤š 5 ä¸ªå…¬ä¼—å·è´¦å·é…ç½®ï¼Œå¿«é€Ÿåˆ‡æ¢åŒæ­¥ã€‚
    - **Cloudflare ä»£ç†æ”¯æŒ**ï¼šè§£å†³ IP ç™½åå•é¢‘ç¹å˜åŒ–é—®é¢˜ï¼Œ[æŸ¥çœ‹éƒ¨ç½²æŒ‡å—](#-ä»£ç†è®¾ç½®è§£å†³-ip-ç™½åå•é—®é¢˜)ã€‚

2.  **ðŸŽ› å…¨æ–°å¯è§†åŒ–è®¾ç½®é¢æ¿ (Settings Panel)**
    - å‘Šåˆ«ç¹ççš„ä»£ç ä¿®æ”¹ï¼æˆ‘ä»¬å†…ç½®äº†ç›´è§‚çš„è®¾ç½®é¢æ¿ï¼Œè®©æ‚¨å¯ä»¥å®žæ—¶è°ƒæ•´å­—ä½“ã€å­—å·ã€ä¸»é¢˜è‰²ç­‰å‚æ•°ï¼Œä¸€åˆ‡å°½åœ¨æŽŒæ¡ã€‚

3.  **ðŸŽ¨ ä¸‰å¤§ä¸“å®¶çº§ä¸»é¢˜ (Premade Themes)**
    - å†…ç½® **ç®€çº¦ (Simple)**ã€**ç»å…¸ (Classic)**ã€**ä¼˜é›… (Elegant)** ä¸‰æ¬¾ç²¾å¿ƒè®¾è®¡çš„ä¸»é¢˜ï¼Œè¦†ç›–ä»ŽæŠ€æœ¯åšå®¢åˆ°äººæ–‡éšç¬”çš„å„ç§åœºæ™¯ã€‚

4.  **ðŸ–¼ï¸ å¼ºå¤§çš„æœ¬åœ°å›¾ç‰‡æ”¯æŒ (Local Image Support)**
    - **æ‰“ç ´å›¾åºŠé™åˆ¶**ï¼šå®Œç¾Žæ”¯æŒ Obsidian çš„æœ¬åœ°å›¾ç‰‡å¼•ç”¨ï¼ˆåŒ…æ‹¬ `![[Wiki Link]]` å’Œ `![]()`ï¼‰ã€‚
    - **å¤´åƒä¸Šä¼ **ï¼šæ”¯æŒç›´æŽ¥ä¸Šä¼ æœ¬åœ°å›¾ç‰‡ä½œä¸ºä½œè€…å¤´åƒï¼Œæ’ä»¶ä¼šè‡ªåŠ¨è½¬ç ä¸º Base64ã€‚
    - **å¼ºå¤§çš„æœ¬åœ°å›¾ç‰‡æ”¯æŒ**ï¼šæ— è®ºæ˜¯ç›¸å¯¹è·¯å¾„ã€ç»å¯¹è·¯å¾„è¿˜æ˜¯ WikiLinkï¼Œéƒ½èƒ½è‡ªåŠ¨è¯†åˆ«å¹¶åŽ‹ç¼©ã€‚
    - **GIF åŠ¨å›¾æ”¯æŒ**ï¼šé’ˆå¯¹ GIF æ ¼å¼ç‰¹åˆ«ä¼˜åŒ–ï¼Œè‡ªåŠ¨ç»•è¿‡åŽ‹ç¼©æµç¨‹ï¼Œå®Œç¾Žä¿ç•™å®Œæ•´åŠ¨ç”»å¸§ã€‚
    - **æ¸©é¦¨æç¤º**ï¼šå»ºè®®å›¾ç‰‡ï¼ˆå°¤å…¶æ˜¯ GIFï¼‰ä¿æŒåœ¨ 10MB ä»¥å†…ï¼Œä»¥èŽ·å¾—æœ€ä½³çš„å¤„ç†é€Ÿåº¦å’Œå…¬ä¼—å·å…¼å®¹æ€§ã€‚è¶…è¿‡ 10MB æ—¶æ’ä»¶ä¼šå¼¹å‡ºæé†’ã€‚

5.  **âš¡ï¸ å®žæ—¶æ¸²æŸ“é¢„è§ˆ (Live Preview)**
    - å³ä¾§é¢„è§ˆåŒºå®žçŽ°äº†**æ¯«ç§’çº§å“åº”**çš„å®žæ—¶æ¸²æŸ“ã€‚æ‚¨åœ¨å·¦ä¾§ Markdown ç¼–è¾‘çš„æ¯ä¸€ä¸ªå­—ç¬¦ï¼Œéƒ½ä¼šå³æ—¶åé¦ˆåœ¨å³ä¾§çš„å…¬ä¼—å·é¢„è§ˆè§†å›¾ä¸­ã€‚

6.  **ðŸ’» Mac é£Žæ ¼ä»£ç å—ä¸Žæ ·å¼è¿˜åŽŸ**
    - é‡æ–°è®¾è®¡äº†ä»£ç å—æ ·å¼ï¼Œæ”¯æŒ macOS çª—å£é£Žæ ¼åŠè¡Œå·æ˜¾ç¤ºã€‚
    - **1:1 å®Œç¾Žè¿˜åŽŸ**ï¼šæˆ‘ä»¬åœ¨ Obsidian é¢„è§ˆåŒºçœ‹åˆ°çš„æ ·å¼ï¼ˆåŒ…æ‹¬é—´è·ã€é¢œè‰²ã€è¾¹æ¡†ã€é˜´å½±ï¼‰ï¼Œå¤åˆ¶åˆ°å¾®ä¿¡åŽå°åŽå°†**åˆ†æ¯«ä¸å·®**ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ðŸ–¼ï¸ **æœ¬åœ°å›¾ç‰‡æ— æ„Ÿå¤„ç†** - å¤åˆ¶æ—¶è‡ªåŠ¨å°†å›¾ç‰‡é«˜ä¿çœŸåŽ‹ç¼©å¹¶è½¬æ¢ä¸º Base64 ç¼–ç åµŒå…¥ HTMLã€‚
- ðŸ§© **æ·±å±‚åˆ—è¡¨å…¼å®¹** - å¤åˆ¶åˆ°å…¬ä¼—å·ç¼–è¾‘å™¨æ—¶ï¼Œæ·±å±‚åµŒå¥—åˆ—è¡¨ä¿æŒå±‚çº§ä¸ä¹±ã€é¡¹ç›®ç¬¦å·ä¸ä¸¢ã€‚
- ðŸŒ— **æ·±è‰²æ¨¡å¼æ”¯æŒ** - å®Œç¾Žé€‚é… Obsidian æ·±è‰²ä¸»é¢˜ï¼Œé¢„è§ˆåŒºä¿æŒç™½çº¸é»‘å­—æ•ˆæžœã€‚
- ðŸ“± **ç§»åŠ¨ç«¯é˜…è¯»ä¼˜åŒ–** - é’ˆå¯¹å¾®ä¿¡çŽ¯å¢ƒä¼˜åŒ–çš„å­—å·ä½“ç³»ä¸Žæ®µé—´è·ã€‚

## ðŸš€ å®‰è£…

### æ–¹æ³• 1: æ‰‹åŠ¨å®‰è£…ï¼ˆæŽ¨èï¼‰

1. ä»Ž [GitHub Releases](https://github.com/DavidLam-oss/obsidian-wechat-converter/releases) ä¸‹è½½æœ€æ–°çš„æ’ä»¶åŒ…ã€‚
2. è§£åŽ‹å¹¶å°†å…¶ä¸­çš„æ–‡ä»¶å¤¹æ”¾å…¥ Obsidian vault çš„ `.obsidian/plugins/wechat-converter/` ç›®å½•ä¸­ã€‚
3. ç¡®ä¿æ–‡ä»¶å¤¹å†…åŒ…å« `main.js`, `manifest.json`, `styles.css`, `converter.js`, `themes/` ä»¥åŠ `lib/`ã€‚
4. é‡å¯ Obsidian æˆ–åœ¨è®¾ç½®ä¸­åˆ·æ–°æ’ä»¶åˆ—è¡¨ï¼Œå¹¶å¯ç”¨æ’ä»¶ã€‚

### æ–¹æ³• 2: ä½¿ç”¨ BRAT

1. å®‰è£… [BRAT](https://github.com/TfTHacker/obsidian42-brat) æ’ä»¶ã€‚
2. æ·»åŠ  Beta ä»“åº“: `DavidLam-oss/obsidian-wechat-converter`ã€‚

## ðŸ“– ä½¿ç”¨æ–¹æ³•

1. **å”¤èµ·æ’ä»¶**
   - ç‚¹å‡» Obsidian å·¦ä¾§è¾¹æ çš„ ðŸª„ å›¾æ ‡ (WeChat Converter)ã€‚
   - æˆ–ä½¿ç”¨å‘½ä»¤é¢æ¿ (`Cmd/Ctrl + P`) æœç´¢å¹¶æ‰§è¡Œ "Open Wechat Converter"ã€‚

2. **é¢„è§ˆä¸Žè°ƒæ•´**
   - æ’ä»¶ä¼šè‡ªåŠ¨åŠ è½½å½“å‰æ¿€æ´»çš„ç¬”è®°å†…å®¹ã€‚
   - åœ¨å³ä¾§é¢æ¿ä¸­ï¼Œæ‚¨å¯ä»¥å®žæ—¶é¢„è§ˆæŽ’ç‰ˆæ•ˆæžœã€‚

3. **ä¸€é”®å¤åˆ¶**
   - ç¡®è®¤é¢„è§ˆæ•ˆæžœæ»¡æ„åŽï¼Œç‚¹å‡»åº•éƒ¨çš„ **[ðŸ“‹ å¤åˆ¶åˆ°å…¬ä¼—å·]** æŒ‰é’®ã€‚
   - æç¤º"å·²å¤åˆ¶"åŽï¼Œç›´æŽ¥åœ¨å¾®ä¿¡å…¬ä¼—å·åŽå°ç¼–è¾‘å™¨ä¸­ `Ctrl/Cmd + V` ç²˜è´´å³å¯ã€‚

4. **ä¸€é”®åŒæ­¥åˆ°å¾®ä¿¡è‰ç¨¿ç®±** â­ æ–°åŠŸèƒ½
   - åœ¨æ’ä»¶è®¾ç½®ä¸­é…ç½®å¾®ä¿¡å…¬ä¼—å·è´¦å·ï¼ˆAppID å’Œ AppSecretï¼‰
   - ç‚¹å‡» **[ðŸš€ ä¸€é”®åŒæ­¥]** æŒ‰é’®ï¼Œé€‰æ‹©è´¦å·å’Œå°é¢å›¾
   - æ–‡ç« å°†è‡ªåŠ¨åŒæ­¥åˆ°å¾®ä¿¡å…¬ä¼—å·è‰ç¨¿ç®±

## ðŸ”§ ä»£ç†è®¾ç½®ï¼ˆè§£å†³ IP ç™½åå•é—®é¢˜ï¼‰

å¾®ä¿¡å…¬ä¼—å· API éœ€è¦ IP ç™½åå•éªŒè¯ã€‚å¦‚æžœä½ ä½¿ç”¨ VPN æˆ–åŠ¨æ€ IPï¼Œå¯ä»¥é€šè¿‡ Cloudflare Worker ä»£ç†è§£å†³ã€‚

### éƒ¨ç½²æ­¥éª¤

1. **åˆ›å»º Cloudflare Worker**
   - ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/)
   - å·¦ä¾§èœå•é€‰æ‹© **Workers & Pages** â†’ **Create Application** â†’ **Create Worker**
   - å‘½åï¼ˆå¦‚ `wechat-proxy`ï¼‰å¹¶ç‚¹å‡» **Deploy**

2. **ç¼–è¾‘ Worker ä»£ç **

   ç‚¹å‡» **Edit code**ï¼Œæ›¿æ¢ä¸ºä»¥ä¸‹ä»£ç ï¼š

   ```javascript
export default {
  async fetch(request, env) {
    const corsHeaders = {
      'Access-Control-Allow-Origin': '*',
      'Access-Control-Allow-Methods': 'POST, OPTIONS',
      'Access-Control-Allow-Headers': 'Content-Type',
    };

    // å¤„ç† CORS é¢„æ£€è¯·æ±‚
    if (request.method === 'OPTIONS') {
      return new Response(null, { headers: corsHeaders });
    }

    if (request.method !== 'POST') {
      return new Response('Method Not Allowed', { status: 405, headers: corsHeaders });
    }

    try {
      const body = await request.json();
      const { url, method = 'GET', data, fileData, fileName, mimeType, fieldName } = body;
      
      // === Debug Logging ===
      console.log('Received URL:', url);
      
      // å®‰å…¨æ ¡éªŒï¼šåªå…è®¸è®¿é—®å¾®ä¿¡ API
      if (!url || !url.startsWith('https://api.weixin.qq.com/')) {
        const errorMsg = `Invalid URL. Expected: starts with https://api.weixin.qq.com/. FLASH: Received [${typeof url}]: ${url}`;
        return new Response(JSON.stringify({ error: errorMsg, receivedBody: body }), { status: 400, headers: corsHeaders });
      }

      let response;
      if (method === 'UPLOAD' && fileData) {
        // æ–‡ä»¶ä¸Šä¼ å¤„ç†ï¼šBase64 -> Binary -> FormData
        const binary = atob(fileData);
        const bytes = new Uint8Array(binary.length);
        for (let i = 0; i < binary.length; i++) bytes[i] = binary.charCodeAt(i);
        
        const formData = new FormData();
        formData.append(fieldName || 'media', new Blob([bytes], { type: mimeType }), fileName);
        response = await fetch(url, { method: 'POST', body: formData });
      } else {
        // æ™®é€š JSON è¯·æ±‚
        const opts = { method, headers: { 'Content-Type': 'application/json' } };
        if (method !== 'GET' && data) opts.body = JSON.stringify(data);
        response = await fetch(url, opts);
      }

      const result = await response.json();
      return new Response(JSON.stringify(result), {
        headers: { ...corsHeaders, 'Content-Type': 'application/json' }
      });
    } catch (error) {
      return new Response(JSON.stringify({ error: `Server Error: ${error.message}`, stack: error.stack }), { status: 500, headers: corsHeaders });
    }
  }
};
   ```


3. **é…ç½®å¾®ä¿¡ IP ç™½åå•**

   å°† Cloudflare å‡ºå£ IP æ·»åŠ åˆ°å¾®ä¿¡å…¬ä¼—å·ç™½åå•ï¼ˆ[å®˜æ–¹ IP åˆ—è¡¨](https://www.cloudflare.com/ips/)ï¼‰ï¼š

   ```
   173.245.48.0/20, 103.21.244.0/22, 103.22.200.0/22, 103.31.4.0/22
   141.101.64.0/18, 108.162.192.0/18, 190.93.240.0/20, 188.114.96.0/20
   197.234.240.0/22, 198.41.128.0/17, 162.158.0.0/15, 104.16.0.0/13
   104.24.0.0/14, 172.64.0.0/13, 131.0.72.0/22
   ```

4. **æ’ä»¶é…ç½®**

   åœ¨æ’ä»¶è®¾ç½® â†’ **é«˜çº§è®¾ç½®** â†’ **API ä»£ç†åœ°å€** ä¸­å¡«å…¥ä½ çš„ Worker URLï¼š
   ```
   https://wechat-proxy.your-account.workers.dev
   ```


## ðŸ¤ è´¡çŒ® (Contributing)

æ¬¢è¿Žæäº¤ Issue æˆ– Pull Requestï¼

1. Fork æœ¬ä»“åº“ã€‚
2. åˆ›å»ºæ‚¨çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)ã€‚
3. æäº¤æ‚¨çš„æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)ã€‚
4. æŽ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)ã€‚
5. å¼€å¯ä¸€ä¸ª Pull Requestã€‚

## ðŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºã€‚

## ðŸ‘¨â€ðŸ’» ä½œè€…

**æž—å°å«å¾ˆè¡Œ (DavidLam)**

ä¸€åçƒ­è¡·äºŽæå‡ç”Ÿäº§åŠ›çš„å¼€å‘è€…ä¸Žå†…å®¹åˆ›ä½œè€…ã€‚
å¦‚æžœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­æœ‰ä»»ä½•é—®é¢˜ã€å»ºè®®æˆ–å‘çŽ°äº† Bugï¼Œæ¬¢è¿Žéšæ—¶åœ¨ GitHub Issue åŒºç•™è¨€åé¦ˆã€‚ç›¸ä¿¡å·¥å…·çš„åŠ›é‡ï¼Œè®©åˆ›ä½œæ›´è‡ªç”±ã€‚
